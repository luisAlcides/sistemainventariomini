{% extends 'base.html' %}

{% block title %}{{ producto.nombre }} - Inventario{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">
    <div class="flex justify-between items-center">
        <h1 class="text-3xl font-bold text-gray-800">
            <i class="fas fa-box mr-2 text-green-500"></i>{{ producto.nombre }}
        </h1>
        <div class="flex space-x-2">
            <a href="{% url 'inventario:editar_producto' producto.id %}" 
               class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition">
                <i class="fas fa-edit mr-2"></i>Editar
            </a>
            <a href="{% url 'inventario:productos' %}" class="text-gray-600 hover:text-gray-800">
                <i class="fas fa-arrow-left mr-2"></i>Volver
            </a>
        </div>
    </div>
    
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h3 class="font-semibold text-gray-700 mb-4">Información General</h3>
                <div class="space-y-3">
                    <div>
                        <p class="text-sm text-gray-500">Código</p>
                        <p class="font-semibold text-gray-800">{{ producto.codigo }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Categoría</p>
                        <p class="font-semibold text-gray-800">{{ producto.categoria.nombre }}</p>
                    </div>
                    {% if producto.descripcion %}
                    <div>
                        <p class="text-sm text-gray-500">Descripción</p>
                        <p class="text-gray-800">{{ producto.descripcion }}</p>
                    </div>
                    {% endif %}
                    <div>
                        <p class="text-sm text-gray-500">Unidad de Medida</p>
                        <p class="font-semibold text-gray-800">{{ producto.unidad_medida }}</p>
                    </div>
                </div>
            </div>
            
            <div>
                <h3 class="font-semibold text-gray-700 mb-4">Precios y Stock</h3>
                <div class="space-y-3">
                    <div>
                        <p class="text-sm text-gray-500">Precio de Compra</p>
                        <p class="font-semibold text-gray-800">C$ {{ producto.precio_compra|floatformat:2 }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Costo Promedio</p>
                        <p class="font-semibold text-blue-600">C$ {{ producto.costo_promedio|floatformat:2 }}</p>
                        <p class="text-xs text-gray-500">Calculado automáticamente</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Porcentaje de Ganancia</p>
                        <p class="font-semibold text-gray-800">{{ producto.porcentaje_ganancia|floatformat:2 }}%</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Precio de Venta</p>
                        <p class="font-semibold text-gray-800">C$ {{ producto.precio_venta|floatformat:2 }}</p>
                        {% if producto.actualizar_precio_automatico %}
                        <p class="text-xs text-green-600">
                            <i class="fas fa-check-circle mr-1"></i>Actualización automática activa
                        </p>
                        {% endif %}
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Stock Actual</p>
                        <p class="font-semibold text-2xl {% if producto.esta_por_agotarse %}text-red-600{% else %}text-gray-800{% endif %}">
                            {{ producto.stock_actual }} {{ producto.unidad_medida }}
                        </p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Stock Mínimo</p>
                        <p class="font-semibold text-gray-800">{{ producto.stock_minimo }} {{ producto.unidad_medida }}</p>
                    </div>
                    {% if producto.esta_por_agotarse %}
                    <div class="bg-red-50 border-l-4 border-red-400 p-3">
                        <p class="text-sm text-red-700">
                            <i class="fas fa-exclamation-triangle mr-1"></i>
                            Este producto está por agotarse
                        </p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="mt-6 pt-6 border-t">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-sm text-gray-500">Valor del Inventario</p>
                    <p class="font-bold text-xl text-gray-800">C$ {{ producto.calcular_valor_inventario|floatformat:2 }}</p>
                </div>
                <div>
                    <span class="px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full 
                        {% if producto.activo %}bg-green-100 text-green-800{% else %}bg-gray-100 text-gray-800{% endif %}">
                        {% if producto.activo %}Activo{% else %}Inactivo{% endif %}
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

